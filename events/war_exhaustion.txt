###########################
# Generic war exhaustion events
###########################

add_namespace = war_exhaustion

# Slight war Exhaustion
country_event = {
	id = war_exhaustion.1
	title = war_exhaustion.1.t
	desc = war_exhaustion.1.d
	picture = war_exhaustion

	mean_time_to_happen = { days = 100 }

	trigger = {
		TAG = GE1
		date > 1916.6.1
		date < 1920.1.1
		OR = {
			GE1 = { has_war_with = EN1 }
			GE1 = { has_war_with = RUS }
			GE1 = { has_war_with = FR3 }
		}
		NOT = { has_country_flag = slight_war_exhaustion_GER }
		NOT = { has_country_flag = heavy_war_exhaustion_GER }
		OR = {
			has_country_flag = exhaustion_going_down
			NOT = { has_country_flag = moderate_war_exhaustion_GER }
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = slight_war_exhaustion_GER
			clr_country_flag = moderate_war_exhaustion_GER
			clr_country_flag = heavy_war_exhaustion_GER
		}
	}

	option = {
		name = war_exhaustion.1.a
		trigger = {
			OR = {
				GE1 = { has_war_with = EN1 }
				GE1 = { has_war_with = RUS }
				GE1 = { has_war_with = FR3 }
			}
		}

		add_ideas = slight_war_exhaustion
		hidden_effect = {
			if = {
				limit = { has_idea = generic_war_exhaustion }
				remove_ideas = generic_war_exhaustion
			}
		}
	}

	option = {
		name = war_exhaustion.1.b
		trigger = {
			NOT = {
				OR = {
					GE1 = { has_war_with = EN1 }
					GE1 = { has_war_with = RUS }
					GE1 = { has_war_with = FR3 }
				}
			}
		}

		add_ideas = slight_war_exhaustion
		hidden_effect = {
			if = {
				limit = { has_idea = generic_war_exhaustion }
				remove_ideas = generic_war_exhaustion
			}
			set_country_flag = exhaustion_going_down
			GE1 = { country_event = { days = 100 id = war_exhaustion.4 } }
		}
	}
}

# Moderate war Exhaustion
country_event = {
	id = war_exhaustion.2
	title = war_exhaustion.2.t
	desc = war_exhaustion.2.d
	picture = war_exhaustion

	mean_time_to_happen = { days = 100 }

	trigger = {
		TAG = GE1
		OR = {
			AND = {
				date > 1917.1.1
				date < 1920.1.1
				OR = {
					GE1 = { has_war_with = EN1 }
					GE1 = { has_war_with = RUS }
					GE1 = { has_war_with = FR3 }
				}
				GE1 = { has_idea = slight_war_exhaustion }
				NOT = { has_country_flag = exhaustion_going_down }
			}
			AND = {
				date > 1918.6.6
				date < 1920.1.1
				has_country_flag = heavy_war_exhaustion_GER

				NOT = {
					AND = {
						has_war_with = EN1
						has_war_with = RUS
						has_war_with = FR3
					}
				}
			}
		}
	}

	immediate = {
		hidden_effect = {
			set_country_flag = moderate_war_exhaustion_GER
			clr_country_flag = slight_war_exhaustion_GER
			clr_country_flag = heavy_war_exhaustion_GER
		}
	}

	option = {
		name = war_exhaustion.2.a
		trigger = {
			OR = {
				GE1 = { has_war_with = EN1 }
				GE1 = { has_war_with = RUS }
				GE1 = { has_war_with = FR3 }
			}
		}

		add_ideas = generic_war_exhaustion
		hidden_effect = {
			if = {
				limit = { has_idea = slight_war_exhaustion }
				remove_ideas = slight_war_exhaustion
			}
			if = {
				limit = { has_idea = heavy_war_exhaustion }
				remove_ideas = heavy_war_exhaustion
			}
		}
	}
	option = {
		name = war_exhaustion.2.b
		trigger = {
			NOT = {
				OR = {
					GE1 = { has_war_with = EN1 }
					GE1 = { has_war_with = RUS }
					GE1 = { has_war_with = FR3 }
				}
			}
		}

		add_ideas = generic_war_exhaustion
		hidden_effect = {
			if = {
				limit = { has_idea = slight_war_exhaustion }
				remove_ideas = slight_war_exhaustion
			}
			if = {
				limit = { has_idea = heavy_war_exhaustion }
				remove_ideas = heavy_war_exhaustion
			}
			GE1 = { country_event = { days = 100 id = war_exhaustion.1 } }
		}
		set_country_flag = exhaustion_going_down
	}
}


# Heavy war Exhaustion
country_event = {
	id = war_exhaustion.3
	title = war_exhaustion.3.t
	desc = war_exhaustion.3.d
	picture = war_exhaustion

	fire_only_once = yes
	mean_time_to_happen = { days = 100 }

	trigger = {
		TAG = GE1
		date > 1918.1.1
		date < 1920.1.1
		OR = {
			GE1 = { has_war_with = EN1 }
			GE1 = { has_war_with = RUS }
			GE1 = { has_war_with = FR3 }
		}
		GE1 = { has_idea = generic_war_exhaustion }
	}

	immediate = {
		hidden_effect = {
			set_country_flag = heavy_war_exhaustion_GER
			clr_country_flag = slight_war_exhaustion_GER
			clr_country_flag = moderate_war_exhaustion_GER
		}
	}

	option = {
		name = war_exhaustion.3.a

		add_ideas = heavy_war_exhaustion
		hidden_effect = {
			if = {
				limit = { has_idea = slight_war_exhaustion }
				remove_ideas = slight_war_exhaustion
			}
			if = {
				limit = { has_idea = generic_war_exhaustion }
				remove_ideas = generic_war_exhaustion
			}
		}
	}
}


# No Exhaustion
country_event = {
	id = war_exhaustion.4
	title = war_exhaustion.4.t
	desc = war_exhaustion.4.d
	picture = war_exhaustion

	is_triggered_only = yes
	mean_time_to_happen = { days = 100 }

	immediate = {
		hidden_effect = {
			clr_country_flag = heavy_war_exhaustion_GER
			clr_country_flag = slight_war_exhaustion_GER
			clr_country_flag = moderate_war_exhaustion_GER
			set_country_flag = exhaustion_gone_GER
		}
	}

	option = {
		name = war_exhaustion.4.a
		if = {
			limit = { has_idea = slight_war_exhaustion }
			remove_ideas = slight_war_exhaustion
		}
	}
}
